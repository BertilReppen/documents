<!-- edited with XMLSpy v2014 rel. 2 sp1 (http://www.altova.com) by Eric Mark Haas (Health eData Inc) -->
<Profile xmlns="http://hl7.org/fhir" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://hl7.org/fhir ../../schema/profile.xsd">
	<!-- text will be generated by build program -->
	<url value="http://hl7.org/fhir/ccda-templates/smoking-status"/>
	<version value="1.0.0"/>
	<name value="(Current) Smoking Status Observation"/>
	<publisher value="OO"/>
	<description value="(Current) Smoking Status Observation CCDA template baed profile on Observation Resource"/>
	<status value="draft"/>
	<date value="2014-07-30"/>
	<requirements value="Entry level templates mapped to FHIR resources for the second ballot"/>
	<fhirVersion value="0.80"/>
	<mapping>
		<!-- set up a formal mapping for the CCDA templates -->
		<identity value="smokingstatus"/>
		<uri value="urn:oid:2.16.840.1.113883.10.20.22.4.78"/>
		<name value="Smoking Status Observation"/>
	</mapping>
	<structure>
		<!-- this is a profile on Observation -->
		<type value="Observation"/>
		<base value="http://hl7.org/fhir/Profile/Observation"/>
		<name value="Smoking Status Observation"/>
		<publish value="true"/>
		<purpose value=" Entry level CCDA templates mapped to FHIR resources as part of the second FHIR DSTU ballot"/>
		<!-- The infrastructure will generate the snapshot for us
    <snapshot/>
-->
		<differential>
			<element>
				<path value="Observation"/>
				<!-- nothing more to say about this. It simply exists for structural reasons -->
			</element>
			<element>
				<path value="Observation.name"/>
				<!-- all we do here is make this a fixed value for LOINC for smoking status -->
				<definition>
					<valueCodeableConcept>
						<coding>
							<system value="http://loinc.org"/>
							<version value="2.48"/>
							<code value="72166-2"/>
							<display value="Tobacco smoking status NHIS"/>
						</coding>
					</valueCodeableConcept>
				</definition>
			</element>
			<element>
				<path value="Observation.value[x]"/>
				<!-- all we do here is make limit this to a single codeable concept and bind to the smoking status value set -->
				<definition>
					<min value="1"/>
					<type>
						<code value="CodeableConcept"/>
					</type>
					<binding>
						<name value="Smoking Status"/>
						<isExtensible value="false"/>
						<conformance value="required"/>
						<description value="This value set indicates the current smoking status of the patient"/>
						<referenceUri value="https://phinvads.cdc.gov/vads/ViewValueSet.action?oid=2.16.840.1.114222.4.11.6027"/>
						<!-- Will VSAC replace this soon?-->
					</binding>
				</definition>
			</element>
			<element>
				<path value="Observation.interpretation"/>
				<!-- not used -->
				<definition>
					<max value="0"/>
				</definition>
			</element>
			<element>
				<path value="Observation.comments"/>
				<!-- not used -->
				<definition>
					<max value="0"/>
				</definition>
			</element>
			<element>
				<path value="Observation.applies[x]"/>
				<!-- limit to single occurance and Period" -->
				<definition>
					<comments value="If the patient is a smoker (77176002), the start element must be present. If the patient is an ex-smoker (8517006), both the start and end element must be present."/>
					<min value="1"/>
					<type>
						<code value="Period"/>
					</type>
				</definition>
			</element>
			<element>
				<path value="Observation.issued"/>
				<!-- not used -->
				<definition>
					<max value="0"/>
				</definition>
			</element>
			<element>
				<path value="Observation.status"/>
				<definition>
					<valueCode value="final"/>
				</definition>
			</element>
			<element>
				<path value="Observation.reliability"/>
				<!-- limit to "ok" -->
				<definition>
					<valueCode value="ok"/>
				</definition>
			</element>
			<element>
				<path value="Observation.bodySite"/>
				<!-- not used -->
				<definition>
					<max value="0"/>
				</definition>
			</element>
			<element>
				<path value="Observation.method"/>
				<!-- not used -->
				<definition>
					<max value="0"/>
				</definition>
			</element>
			<element>
				<path value="Observation.identifier"/>
				<!-- not used -->
				<definition>
					<max value="0"/>
				</definition>
			</element>
			<element>
				<path value="Observation.specimen"/>
				<!-- not used -->
				<definition>
					<max value="0"/>
				</definition>
			</element>
			<element>
				<path value="Observation.referenceRange"/>
				<!-- not used -->
				<definition>
					<max value="0"/>
				</definition>
			</element>
			<element>
			<path value="Observation.related"/>
				<!-- not used -->
				<definition>
					<max value="0"/>
				</definition>
			</element>
		</differential>
	</structure>
</Profile>